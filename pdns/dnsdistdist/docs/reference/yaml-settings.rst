.. THIS IS A GENERATED FILE. DO NOT EDIT. See dnsdist-settings-documentation-generator.py

.. raw:: latex

    \setcounter{secnumdepth}{-1}

YAML configuration reference
============================

Since 2.0.0, :program:`dnsdist` supports the YAML configuration format in addition to the existing Lua one.

If the configuration file passed to :program:`dnsdist` via the ``-C`` command-line switch ends in ``.yml``, it is assumed to be in the new YAML format, and an attempt to load a Lua configuration file with the same name but the ``.lua`` will be done before loading the YAML configuration. If the names ends in ``.lua``, there will also be an attempt to find a file with the same name but ending in ``.yml``. Otherwise the existing Lua configuration format is assumed.

A YAML configuration file contains several sections, that are described below.

.. code-block:: yaml

.. _yaml-settings-GlobalConfiguration:

GlobalConfiguration
-------------------

- **acl**: Sequence of String ``(127.0.0.0/8, 10.0.0.0/8, 100.64.0.0/10, 169.254.0.0/16, 192.168.0.0/16, 172.16.0.0/12, ::1/128, fc00::/7, fe80::/10)`` - CIDR netmasks of the clients allowed to send DNS queries
- **backends**: Sequence of :ref:`BackendConfiguration <yaml-settings-BackendConfiguration>` - List of backends
- **binds**: Sequence of :ref:`BindConfiguration <yaml-settings-BindConfiguration>` - List of endpoints to accept queries on
- **cache-hit-response-rules**: Sequence of :ref:`ResponseRuleConfiguration <yaml-settings-ResponseRuleConfiguration>` - List of rules executed on a cache hit
- **cache-inserted-response-rules**: Sequence of :ref:`ResponseRuleConfiguration <yaml-settings-ResponseRuleConfiguration>` - List of rules executed after inserting a new response into the cache
- **cache-miss-rules**: Sequence of :ref:`QueryRuleConfiguration <yaml-settings-QueryRuleConfiguration>` - List of rules executed after a cache miss
- **cache-settings**: :ref:`CacheSettingsConfiguration <yaml-settings-CacheSettingsConfiguration>` - Caching-related settings
- **console**: :ref:`ConsoleConfiguration <yaml-settings-ConsoleConfiguration>` - Console-related settings
- **dynamic-rules**: Sequence of :ref:`DynamicRulesConfiguration <yaml-settings-DynamicRulesConfiguration>` - List of dynamic rules
- **dynamic-rules-settings**: :ref:`DynamicRulesSettingsConfiguration <yaml-settings-DynamicRulesSettingsConfiguration>` - Dynamic rules-related settings
- **edns-client-subnet**: :ref:`EdnsClientSubnetConfiguration <yaml-settings-EdnsClientSubnetConfiguration>` - EDNS Client Subnet-related settings
- **general**: :ref:`GeneralConfiguration <yaml-settings-GeneralConfiguration>` - General settings
- **key-value-stores**: :ref:`KeyValueStoresConfiguration <yaml-settings-KeyValueStoresConfiguration>` - Key-Value stores
- **load-balancing-policies**: :ref:`LoadBalancingPoliciesConfiguration <yaml-settings-LoadBalancingPoliciesConfiguration>` - Load-balancing policies
- **metrics**: :ref:`MetricsConfiguration <yaml-settings-MetricsConfiguration>` - Metrics-related settings
- **packet-caches**: Sequence of :ref:`PacketCacheConfiguration <yaml-settings-PacketCacheConfiguration>` - Packet-cache definitions
- **pools**: Sequence of :ref:`PoolConfiguration <yaml-settings-PoolConfiguration>` - Pools of backends
- **proxy-protocol**: :ref:`ProxyProtocolConfiguration <yaml-settings-ProxyProtocolConfiguration>` - Proxy-protocol-related settings
- **query-count**: :ref:`QueryCountConfiguration <yaml-settings-QueryCountConfiguration>` - Queries counting-related settings
- **query-rules**: Sequence of :ref:`QueryRuleConfiguration <yaml-settings-QueryRuleConfiguration>` - List of rules executed when a query is received
- **remote-logging**: :ref:`RemoteLoggingConfiguration <yaml-settings-RemoteLoggingConfiguration>` - Remote logging-related settings
- **response-rules**: Sequence of :ref:`ResponseRuleConfiguration <yaml-settings-ResponseRuleConfiguration>` - List of rules executed when a response is received
- **ring-buffers**: :ref:`RingBuffersConfiguration <yaml-settings-RingBuffersConfiguration>` - In-memory ring buffer settings
- **security-polling**: :ref:`SecurityPollingConfiguration <yaml-settings-SecurityPollingConfiguration>` - Automatic checking of outdated version
- **selectors**: Sequence of :ref:`Selector <yaml-settings-Selector>` - List of selectors that can be reused in rules
- **self-answered-response-rules**: Sequence of :ref:`ResponseRuleConfiguration <yaml-settings-ResponseRuleConfiguration>` - List of rules executed when a response is generated by DNSdist itself
- **snmp**: :ref:`SnmpConfiguration <yaml-settings-SnmpConfiguration>` - SNMP-related settings
- **tuning**: :ref:`TuningConfiguration <yaml-settings-TuningConfiguration>` - Performance-related settings
- **webserver**: :ref:`WebserverConfiguration <yaml-settings-WebserverConfiguration>` - Internal web server configuration
- **xfr-response-rules**: Sequence of :ref:`ResponseRuleConfiguration <yaml-settings-ResponseRuleConfiguration>` - List of rules executed when a XFR response is received



.. _yaml-settings-BackendConfiguration:

BackendConfiguration
--------------------

- **address**: String
- **id**: String ``("")``
- **name**: String ``("")``
- **protocol**: String
- **tls**: :ref:`OutgoingTlsConfiguration <yaml-settings-OutgoingTlsConfiguration>`
- **doh**: :ref:`OutgoingDohConfiguration <yaml-settings-OutgoingDohConfiguration>`
- **use-client-subnet**: Boolean ``(false)``
- **use-proxy-protocol**: Boolean ``(false)``
- **queries-per-second**: Unsigned integer ``(0)``
- **order**: Unsigned integer ``(1)``
- **weight**: Unsigned integer ``(1)``
- **pools**: Sequence of String
- **retries**: Unsigned integer ``(5)``
- **tcp**: :ref:`OutgoingTcpConfiguration <yaml-settings-OutgoingTcpConfiguration>`
- **ip-bind-addr-no-port**: Boolean ``(true)``
- **health-checks**: :ref:`HealthCheckConfiguration <yaml-settings-HealthCheckConfiguration>`
- **source**: String ``("")``
- **sockets**: Unsigned integer ``(1)``
- **disable-zero-scope**: Boolean ``(false)``
- **reconnect-on-up**: Boolean ``(false)``
- **max-in-flight**: Unsigned integer ``(1)``
- **tcp-only**: Boolean ``(false)``
- **auto-upgrade**: :ref:`OutgoingAutoUpgradeConfiguration <yaml-settings-OutgoingAutoUpgradeConfiguration>`
- **max-concurrent-tcp-connections**: Unsigned integer ``(0)``
- **ktls**: Boolean ``(false)``
- **proxy-protocol-advertise-tls**: Boolean ``(false)``
- **xsk-sockets**: Sequence of String
- **mac-address**: String ``("")``
- **cpus**: String ``("")``


.. _yaml-settings-BindConfiguration:

BindConfiguration
-----------------

- **listen-address**: String - Address and port to listen to
- **reuseport**: Boolean ``(false)``
- **protocol**: String ``(Do53)``
- **threads**: Unsigned integer ``(1)``
- **interface**: String ``("")``
- **cpus**: String ``("")``
- **enable-proxy-protocol**: Boolean ``(false)``
- **tcp**: :ref:`IncomingTcpConfiguration <yaml-settings-IncomingTcpConfiguration>`
- **tls**: :ref:`IncomingTlsConfiguration <yaml-settings-IncomingTlsConfiguration>`
- **doh**: :ref:`IncomingDohConfiguration <yaml-settings-IncomingDohConfiguration>`
- **doq**: :ref:`IncomingDoqConfiguration <yaml-settings-IncomingDoqConfiguration>`
- **quic**: :ref:`IncomingQuicConfiguration <yaml-settings-IncomingQuicConfiguration>`
- **dnscrypt**: :ref:`IncomingDnscryptConfiguration <yaml-settings-IncomingDnscryptConfiguration>`
- **additional-addresses**: Sequence of String


.. _yaml-settings-CDBKVStoreConfiguration:

CDBKVStoreConfiguration
-----------------------

- **name**: String
- **file-name**: String
- **refresh-delay**: Unsigned integer


.. _yaml-settings-CacheSettingsConfiguration:

CacheSettingsConfiguration
--------------------------

- **stale-entries-ttl**: Unsigned integer ``(0)``
- **cleaning-delay**: Unsigned integer ``(60)``
- **cleaning-percentage**: Unsigned integer ``(100)``


.. _yaml-settings-CarbonConfiguration:

CarbonConfiguration
-------------------

- **address**: String - Indicates the IP address where the statistics should be sent
- **name**: String ``("")`` - An optional string specifying the hostname that should be used. If left empty, the system hostname is used
- **interval**: Unsigned integer ``(30)`` - An optional unsigned integer indicating the interval in seconds between exports
- **namespace**: String ``("")`` - An optional string specifying the namespace name that should be used
- **instance**: String ``("")`` - An optional string specifying the instance name that should be used


.. _yaml-settings-ConsoleConfiguration:

ConsoleConfiguration
--------------------

- **listen-address**: String ``("")`` - IP address and port to listen on for console connections
- **key**: String ``("")`` - The shared secret used to secure connections between the console client and the server, generated via ``makeKey()``
- **acl**: Sequence of String ``(127.0.0.1, ::1)`` - List of network masks or IP addresses that are allowed to open a connection to the console server
- **maximum-output-size**: Unsigned integer ``(10000000)``
- **log-connections**: Boolean ``(true)``
- **max-concurrent-connections**: Unsigned integer ``(0)``


.. _yaml-settings-CustomLoadBalancingPolicyConfiguration:

CustomLoadBalancingPolicyConfiguration
--------------------------------------

- **name**: String
- **function**: String
- **ffi**: Boolean ``(false)``
- **per-thread**: Boolean ``(false)``


.. _yaml-settings-DnstapLoggerConfiguration:

DnstapLoggerConfiguration
-------------------------

- **name**: String
- **transport**: String
- **address**: String
- **buffer-hint**: Unsigned integer ``(0)``
- **flush-timeout**: Unsigned integer ``(0)``
- **input-queue-size**: Unsigned integer ``(0)``
- **output-queue-size**: Unsigned integer ``(0)``
- **queue-notify-threshold**: Unsigned integer ``(0)``
- **reopen-interval**: Unsigned integer ``(0)``


.. _yaml-settings-DohTuningConfiguration:

DohTuningConfiguration
----------------------

- **outgoing-worker-threads**: Unsigned integer ``(10)``
- **outgoing-max-idle-time**: Unsigned integer ``(300)``
- **outgoing-cleanup-interval**: Unsigned integer ``(60)``
- **outgoing-max-idle-connection-per-backend**: Unsigned integer ``(10)``


.. _yaml-settings-DynamicRuleConfiguration:

DynamicRuleConfiguration
------------------------

- **type**: String
- **seconds**: Unsigned integer
- **action-duration**: Unsigned integer
- **comment**: String
- **rate**: Unsigned integer ``(0)``
- **ratio**: Double ``(0.0)``
- **action**: String ``(drop)``
- **warning-rate**: Unsigned integer ``(0)``
- **warning-ratio**: Double ``(0.0)``
- **tag-name**: String ``("")``
- **tag-value**: String ``(0)``
- **visitor-function**: String ``("")``
- **rcode**: String ``("")``
- **qtype**: String ``("")``
- **minimum-number-of-responses**: Unsigned integer ``(0)``
- **minimum-global-cache-hit-ratio**: Double ``(0.0)``


.. _yaml-settings-DynamicRulesConfiguration:

DynamicRulesConfiguration
-------------------------

- **name**: String
- **mask-ipv4**: Unsigned integer ``(32)``
- **mask-ipv6**: Unsigned integer ``(64)``
- **mask-port**: Unsigned integer ``(0)``
- **exclude-ranges**: Sequence of String
- **include-ranges**: Sequence of String
- **exclude-domains**: Sequence of String
- **rules**: Sequence of :ref:`DynamicRuleConfiguration <yaml-settings-DynamicRuleConfiguration>`


.. _yaml-settings-DynamicRulesSettingsConfiguration:

DynamicRulesSettingsConfiguration
---------------------------------

- **purge-interval**: Unsigned integer ``(60)``
- **default-action**: String ``(Drop)``


.. _yaml-settings-EdnsClientSubnetConfiguration:

EdnsClientSubnetConfiguration
-----------------------------

- **override-existing**: Boolean ``(false)`` - When `useClientSubnet` in `newServer()` is set and dnsdist adds an EDNS Client Subnet Client option to the query, override an existing option already present in the query, if any. Please see Passing the source address to the backend for more information. Note that it’s not recommended to enable setECSOverride in front of an authoritative server responding with EDNS Client Subnet information as mismatching data (ECS scopes) can confuse clients and lead to SERVFAIL responses on downstream nameservers
- **source-prefix-v4**: Unsigned integer ``(32)`` - When `useClientSubnet` in `newServer()` is set and dnsdist adds an EDNS Client Subnet Client option to the query, truncate the requestor's IPv4 address to `prefix` bits
- **source-prefix-v6**: Unsigned integer ``(56)`` - When `useClientSubnet` in `newServer()` is set and dnsdist adds an EDNS Client Subnet Client option to the query, truncate the requestor's IPv6 address to `prefix` bits


.. _yaml-settings-GeneralConfiguration:

GeneralConfiguration
--------------------

- **edns-udp-payload-size-self-generated-answers**: Unsigned integer ``(1232)``
- **add-edns-to-self-generated-answers**: Boolean ``(true)``
- **truncate-tc-answers**: Boolean ``(false)``
- **fixup-case**: Boolean ``(false)``
- **verbose**: Boolean ``(false)``
- **verbose-health-checks**: Boolean ``(false)``
- **allow-empty-responses**: Boolean ``(false)``
- **drop-empty-queries**: Boolean ``(false)``
- **capabilities-to-retain**: Sequence of String


.. _yaml-settings-HealthCheckConfiguration:

HealthCheckConfiguration
------------------------

- **mode**: String ``(auto)``
- **qname**: String ``("")``
- **qclass**: String ``(IN)``
- **qtype**: String ``(A)``
- **function**: String ``("")``
- **timeout**: Unsigned integer ``(1000)``
- **set-cd**: Boolean ``(false)``
- **max-failures**: Unsigned integer ``(1)``
- **rise**: Unsigned integer ``(1)``
- **interval**: Unsigned integer ``(1)``
- **must-resolve**: Boolean ``(false)``
- **use-tcp**: Boolean ``(false)``
- **lazy**: :ref:`LazyHealthCheckConfiguration <yaml-settings-LazyHealthCheckConfiguration>`


.. _yaml-settings-HttpCustomResponseHeaderConfiguration:

HttpCustomResponseHeaderConfiguration
-------------------------------------

- **key**: String
- **value**: String


.. _yaml-settings-HttpResponsesMapConfiguration:

HttpResponsesMapConfiguration
-----------------------------

- **expression**: String
- **status**: Unsigned integer
- **content**: String
- **headers**: Sequence of :ref:`HttpCustomResponseHeaderConfiguration <yaml-settings-HttpCustomResponseHeaderConfiguration>`


.. _yaml-settings-IncomingDnscryptCertificateKeyPairConfiguration:

IncomingDnscryptCertificateKeyPairConfiguration
-----------------------------------------------

- **certificate**: String
- **key**: String


.. _yaml-settings-IncomingDnscryptConfiguration:

IncomingDnscryptConfiguration
-----------------------------

- **provider-name**: String ``("")``
- **certificates**: Sequence of :ref:`IncomingDnscryptCertificateKeyPairConfiguration <yaml-settings-IncomingDnscryptCertificateKeyPairConfiguration>`


.. _yaml-settings-IncomingDohConfiguration:

IncomingDohConfiguration
------------------------

- **provider**: String ``(nghttp2)``
- **paths**: Sequence of String ``(/dns-query)``
- **idle-timeout**: Unsigned integer ``(30)``
- **server-tokens**: String ``(h2o/dnsdist)``
- **send-cache-control-headers**: Boolean ``(true)``
- **keep-incoming-headers**: Boolean ``(false)``
- **trust-forwarded-for-header**: Boolean ``(false)``
- **early-acl-drop**: Boolean ``(true)``
- **exact-path-matching**: Boolean ``(true)``
- **internal-pipe-buffer-size**: Unsigned integer ``(1048576)``
- **custom-response-headers**: Sequence of :ref:`HttpCustomResponseHeaderConfiguration <yaml-settings-HttpCustomResponseHeaderConfiguration>`
- **responses-map**: Sequence of :ref:`HttpResponsesMapConfiguration <yaml-settings-HttpResponsesMapConfiguration>`


.. _yaml-settings-IncomingDoqConfiguration:

IncomingDoqConfiguration
------------------------

- **max_concurrent_queries_per_connection**: Unsigned integer ``(65535)``


.. _yaml-settings-IncomingQuicConfiguration:

IncomingQuicConfiguration
-------------------------

- **idle-timeout**: Unsigned integer ``(5)``
- **congestion-control-algorithm**: String ``(reno)``
- **internal-pipe-buffer-size**: Unsigned integer ``(1048576)``


.. _yaml-settings-IncomingTcpConfiguration:

IncomingTcpConfiguration
------------------------

- **max-in-flight-queries**: Unsigned integer ``(0)``
- **listen-queue-size**: Unsigned integer ``(0)``
- **fast-open-queue-size**: Unsigned integer ``(0)``
- **max-concurrent-connections**: Unsigned integer ``(0)``


.. _yaml-settings-IncomingTlsCertificateKeyPairConfiguration:

IncomingTlsCertificateKeyPairConfiguration
------------------------------------------

- **certificate**: String
- **key**: String ``("")``
- **password**: String ``("")``


.. _yaml-settings-IncomingTlsConfiguration:

IncomingTlsConfiguration
------------------------

- **provider**: String ``(OpenSSL)``
- **certificates**: Sequence of :ref:`IncomingTlsCertificateKeyPairConfiguration <yaml-settings-IncomingTlsCertificateKeyPairConfiguration>`
- **ignore-errors**: Boolean ``(false)``
- **ciphers**: String ``("")``
- **ciphers-tls-13**: String ``("")``
- **minimum-version**: String ``(tls1.0)``
- **ticket-key-file**: String ``("")``
- **tickets-keys-rotation-delay**: Unsigned integer ``(43200)``
- **number-of-tickets-keys**: Unsigned integer ``(5)``
- **prefer-server-ciphers**: Boolean ``(true)``
- **session-timeout**: Unsigned integer ``(0)``
- **session-tickets**: Boolean ``(true)``
- **number-of-stored-sessions**: Unsigned integer ``(20480)``
- **ocsp-response-files**: Sequence of String
- **key-log-file**: String ``("")``
- **release-buffers**: Boolean ``(true)``
- **enable-renegotiation**: Boolean ``(false)``
- **async-mode**: Boolean ``(false)``
- **ktls**: Boolean ``(false)``
- **read-ahead**: Boolean ``(true)``
- **proxy-protocol-outside-tls**: Boolean ``(false)``
- **ignore-configuration-errors**: Boolean ``(false)``


.. _yaml-settings-KVSLookupKeyQNameConfiguration:

KVSLookupKeyQNameConfiguration
------------------------------

- **name**: String
- **wire-format**: Boolean ``(true)``


.. _yaml-settings-KVSLookupKeySourceIPConfiguration:

KVSLookupKeySourceIPConfiguration
---------------------------------

- **name**: String
- **v4-mask**: Unsigned integer ``(32)``
- **v6-mask**: Unsigned integer ``(128)``
- **include-port**: Boolean ``(false)``


.. _yaml-settings-KVSLookupKeySuffixConfiguration:

KVSLookupKeySuffixConfiguration
-------------------------------

- **name**: String
- **minimum-labels**: Unsigned integer ``(0)``
- **wire-format**: Boolean ``(true)``


.. _yaml-settings-KVSLookupKeyTagConfiguration:

KVSLookupKeyTagConfiguration
----------------------------

- **name**: String
- **tag**: String


.. _yaml-settings-KVSLookupKeysConfiguration:

KVSLookupKeysConfiguration
--------------------------

- **source-ip-keys**: Sequence of :ref:`KVSLookupKeySourceIPConfiguration <yaml-settings-KVSLookupKeySourceIPConfiguration>`
- **qname-keys**: Sequence of :ref:`KVSLookupKeyQNameConfiguration <yaml-settings-KVSLookupKeyQNameConfiguration>`
- **suffix-keys**: Sequence of :ref:`KVSLookupKeySuffixConfiguration <yaml-settings-KVSLookupKeySuffixConfiguration>`
- **tag-keys**: Sequence of :ref:`KVSLookupKeyTagConfiguration <yaml-settings-KVSLookupKeyTagConfiguration>`


.. _yaml-settings-KeyValueStoresConfiguration:

KeyValueStoresConfiguration
---------------------------

- **lmdb**: Sequence of :ref:`LMDBKVStoreConfiguration <yaml-settings-LMDBKVStoreConfiguration>`
- **cdb**: Sequence of :ref:`CDBKVStoreConfiguration <yaml-settings-CDBKVStoreConfiguration>`
- **lookup-keys**: :ref:`KVSLookupKeysConfiguration <yaml-settings-KVSLookupKeysConfiguration>`


.. _yaml-settings-LMDBKVStoreConfiguration:

LMDBKVStoreConfiguration
------------------------

- **name**: String
- **file-name**: String
- **database-name**: String
- **no-lock**: Boolean ``(false)``


.. _yaml-settings-LazyHealthCheckConfiguration:

LazyHealthCheckConfiguration
----------------------------

- **interval**: Unsigned integer ``(30)``
- **min-sample-count**: Unsigned integer ``(1)``
- **mode**: String ``(TimeoutOrServFail)``
- **sample-size**: Unsigned integer ``(100)``
- **threshold**: Unsigned integer ``(20)``
- **use-exponential-back-off**: Boolean ``(false)``
- **max-back-off**: Unsigned integer ``(3600)``


.. _yaml-settings-LoadBalancingPoliciesConfiguration:

LoadBalancingPoliciesConfiguration
----------------------------------

- **servfail-on-no-server**: Boolean ``(false)``
- **round-robin-servfail-on-no-server**: Boolean ``(false)``
- **weighted-balancing-factor**: Double ``(0.0)``
- **consistent-hashing-balancing-factor**: Double ``(0.0)``
- **custom-policies**: Sequence of :ref:`CustomLoadBalancingPolicyConfiguration <yaml-settings-CustomLoadBalancingPolicyConfiguration>`
- **hash-perturbation**: Unsigned integer ``(0)``


.. _yaml-settings-MetricsConfiguration:

MetricsConfiguration
--------------------

- **carbon**: Sequence of :ref:`CarbonConfiguration <yaml-settings-CarbonConfiguration>`


.. _yaml-settings-OutgoingAutoUpgradeConfiguration:

OutgoingAutoUpgradeConfiguration
--------------------------------

- **enabled**: Boolean ``(false)``
- **interval**: Unsigned integer ``(3600)``
- **keep**: Boolean ``(false)``
- **pool**: String ``("")``
- **doh-key**: Unsigned integer ``(7)``
- **use-lazy-health-check**: Boolean ``(false)``


.. _yaml-settings-OutgoingDohConfiguration:

OutgoingDohConfiguration
------------------------

- **path**: String ``(/dns-query)``
- **add-x-forwarded-headers**: Boolean ``(false)``


.. _yaml-settings-OutgoingTcpConfiguration:

OutgoingTcpConfiguration
------------------------

- **connect-timeout**: Unsigned integer ``(5)``
- **send-timeout**: Unsigned integer ``(30)``
- **receive-timeout**: Unsigned integer ``(30)``
- **fast-open**: Boolean ``(false)``


.. _yaml-settings-OutgoingTlsConfiguration:

OutgoingTlsConfiguration
------------------------

- **provider**: String ``(OpenSSL)``
- **subject-name**: String ``("")``
- **subject-address**: String ``("")``
- **validate-certificate**: Boolean ``(true)``
- **ca-store**: String ``("")``
- **ciphers**: String ``("")``
- **ciphers-tls-13**: String ``("")``
- **key-log-file**: String ``("")``
- **release-buffers**: Boolean ``(true)``
- **enable-renegotiation**: Boolean ``(false)``
- **ktls**: Boolean ``(false)``


.. _yaml-settings-PacketCacheConfiguration:

PacketCacheConfiguration
------------------------

- **name**: String
- **size**: Unsigned integer
- **deferrable-insert-lock**: Boolean ``(true)``
- **dont-age**: Boolean ``(false)``
- **keep-stale-data**: Boolean ``(false)``
- **max-negative-ttl**: Unsigned integer ``(3600)``
- **max-ttl**: Unsigned integer ``(86400)``
- **min-ttl**: Unsigned integer ``(0)``
- **shards**: Unsigned integer ``(20)``
- **parse-ecs**: Boolean ``(false)``
- **stale-ttl**: Unsigned integer ``(60)``
- **temporary-failure-ttl**: Unsigned integer ``(60)``
- **cookie-hashing**: Boolean ``(false)``
- **maximum-entry-size**: Unsigned integer ``(0)``
- **options-to-skip**: Sequence of String


.. _yaml-settings-PoolConfiguration:

PoolConfiguration
-----------------

- **name**: String
- **packet-cache**: String
- **policy**: String ``(least-outstanding)``


.. _yaml-settings-ProtoBufMetaConfiguration:

ProtoBufMetaConfiguration
-------------------------

- **key**: String
- **value**: String


.. _yaml-settings-ProtobufLoggerConfiguration:

ProtobufLoggerConfiguration
---------------------------

- **name**: String
- **address**: String - An IP:PORT combination where the logger is listening
- **timeout**: Unsigned integer ``(2)`` - TCP connect timeout in seconds
- **max-queued-entries**: Unsigned integer ``(100)`` - Queue this many messages before dropping new ones (e.g. when the remote listener closes the connection)
- **reconnect-wait-time**: Unsigned integer ``(1)`` - Time in seconds between reconnection attempts


.. _yaml-settings-ProxyProtocolConfiguration:

ProxyProtocolConfiguration
--------------------------

- **acl**: Sequence of String ``("")``
- **maximum-payload-size**: Unsigned integer ``(512)``
- **apply-acl-to-proxied-clients**: Boolean ``(false)``


.. _yaml-settings-ProxyProtocolValueConfiguration:

ProxyProtocolValueConfiguration
-------------------------------

- **key**: Unsigned integer
- **value**: String


.. _yaml-settings-QueryCountConfiguration:

QueryCountConfiguration
-----------------------

- **enabled**: Boolean ``(false)``
- **filter**: String ``("")``


.. _yaml-settings-QueryRuleConfiguration:

QueryRuleConfiguration
----------------------

- **name**: String
- **uuid**: String
- **selector**: :ref:`Selector <yaml-settings-Selector>`
- **action**: :ref:`Action <yaml-settings-Action>`


.. _yaml-settings-RemoteLoggingConfiguration:

RemoteLoggingConfiguration
--------------------------

- **protobuf-loggers**: Sequence of :ref:`ProtobufLoggerConfiguration <yaml-settings-ProtobufLoggerConfiguration>`
- **dnstap-loggers**: Sequence of :ref:`DnstapLoggerConfiguration <yaml-settings-DnstapLoggerConfiguration>`


.. _yaml-settings-ResponseRuleConfiguration:

ResponseRuleConfiguration
-------------------------

- **name**: String
- **uuid**: String
- **selector**: :ref:`Selector <yaml-settings-Selector>`
- **action**: :ref:`ResponseAction <yaml-settings-ResponseAction>`


.. _yaml-settings-RingBuffersConfiguration:

RingBuffersConfiguration
------------------------

- **size**: Unsigned integer ``(10000)`` - The maximum amount of queries to keep in the ringbuffer
- **shards**: Unsigned integer ``(10)`` - The number of shards to use to limit lock contention
- **lock-retries**: Unsigned integer ``(5)`` - Set the number of shards to attempt to lock without blocking before giving up and simply blocking while waiting for the next shard to be available. Default to 5 if there is more than one shard, 0 otherwise
- **record-queries**: Boolean ``(true)`` - Whether to record queries in the ring buffers
- **record-responses**: Boolean ``(true)`` - Whether to record responses in the ring buffers


.. _yaml-settings-SecurityPollingConfiguration:

SecurityPollingConfiguration
----------------------------

- **polling-interval**: Unsigned integer ``(3600)``
- **suffix**: String ``(secpoll.powerdns.com.)``


.. _yaml-settings-SnmpConfiguration:

SnmpConfiguration
-----------------

- **enabled**: Boolean ``(false)``
- **traps-enabled**: Boolean ``(false)``
- **daemon-socket**: String ``("")``


.. _yaml-settings-TcpTuningConfiguration:

TcpTuningConfiguration
----------------------

- **worker-threads**: Unsigned integer ``(10)``
- **receive-timeout**: Unsigned integer ``(2)``
- **send-timeout**: Unsigned integer ``(2)``
- **max-queries-per-connection**: Unsigned integer ``(0)``
- **max-connection-duration**: Unsigned integer ``(0)``
- **max-queued-connections**: Unsigned integer ``(10000)``
- **internal-pipe-buffer-size**: Unsigned integer ``(1048576)``
- **outgoing-max-idle-time**: Unsigned integer ``(300)``
- **outgoing-cleanup-interval**: Unsigned integer ``(60)``
- **outgoing-max-idle-connection-per-backend**: Unsigned integer ``(10)``
- **max-connections-per-client**: Unsigned integer ``(0)``
- **fast-open-key**: String ``("")``


.. _yaml-settings-TlsTuningConfiguration:

TlsTuningConfiguration
----------------------

- **outgoing-tickets-cache-cleanup-delay**: Unsigned integer ``(60)``
- **outgoing-tickets-cache-validity**: Unsigned integer ``(600)``
- **max-outgoing-tickets-per-backend**: Unsigned integer ``(20)``


.. _yaml-settings-TuningConfiguration:

TuningConfiguration
-------------------

- **doh**: :ref:`DohTuningConfiguration <yaml-settings-DohTuningConfiguration>`
- **tcp**: :ref:`TcpTuningConfiguration <yaml-settings-TcpTuningConfiguration>`
- **tls**: :ref:`TlsTuningConfiguration <yaml-settings-TlsTuningConfiguration>`
- **udp**: :ref:`UdpTuningConfiguration <yaml-settings-UdpTuningConfiguration>`


.. _yaml-settings-UdpTuningConfiguration:

UdpTuningConfiguration
----------------------

- **messages-per-round**: Unsigned integer ``(1)``
- **send-buffer-size**: Unsigned integer ``(0)``
- **receive-buffer-size**: Unsigned integer ``(0)``
- **max-outstanding-per-backend**: Unsigned integer ``(65535)``
- **timeout**: Unsigned integer ``(2)``
- **randomize-outgoing-sockets-to-backend**: Boolean ``(false)``
- **randomize-ids-to-backend**: Boolean ``(false)``


.. _yaml-settings-WebserverConfiguration:

WebserverConfiguration
----------------------

- **listen-address**: String ``("")`` - IP address and port to listen on
- **password**: String ``("")`` - The password used to access the internal webserver. Since 1.7.0 the password should be hashed and salted via the ``hashPassword()`` command
- **api-key**: String ``("")`` - The API Key (set to an empty string do disable it). Since 1.7.0 the key should be hashed and salted via the ``hashPassword()`` command
- **acl**: Sequence of String ``(127.0.0.1, ::1)`` - List of network masks or IP addresses that are allowed to open a connection to the web server
- **api-requires-authentication**: Boolean ``(true)`` - Whether access to the API (/api endpoints) requires a valid API key
- **stats-require-authentication**: Boolean ``(true)`` - Whether access to the statistics (/metrics and /jsonstat endpoints) requires a valid password or API key
- **dashboard-requires-authentication**: Boolean ``(true)`` - Whether access to the internal dashboard requires a valid password
- **max-concurrent-connections**: Unsigned integer ``(100)`` - The maximum number of concurrent web connections, or 0 which means an unlimited number
- **hash-plaintext-credentials**: Boolean ``(false)`` - Whether passwords and API keys provided in plaintext should be hashed during startup, to prevent the plaintext versions from staying in memory. Doing so increases significantly the cost of verifying credentials
- **custom-headers**: Sequence of :ref:`HttpCustomResponseHeaderConfiguration <yaml-settings-HttpCustomResponseHeaderConfiguration>`
- **api-configuration-directory**: String ``("")``
- **api-read-write**: Boolean ``(false)``


